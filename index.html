<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Share a Secret Code</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="awesomplete-gh-pages/awesomplete.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="main-container">
        <button onclick="toggleTheme()">Switch to Light Mode</button>
        <h2>Share a Secret Code with a Friend</h2>
        <section>
            <h3>What’s This For?</h3>
            <p>This website helps you and a friend create a secret code to lock messages, files, or chats so only you two can access them. It’s like mixing two unique colors over a phone call to create a new color only you both know!</p>
            <p><strong>Why It’s Safe:</strong> You share a “public address” (24 words) over a call. Even if someone overhears, they can’t figure out your secret code because it’s created using a private “key” you keep hidden.</p>
        </section>
        <section>
            <h3>How to Use It</h3>
            <ol>
                <li>
                    <strong>Create Your Codes</strong>
                    <p>Click “Create My Codes” to get your public address (24 words to share) and private key (24 words to keep secret).</p>
                </li>
                <li>
                    <strong>Share Your Public Address</strong>
                    <p>Call your friend and read your 24-word public address aloud. Confirm their voice to ensure it’s them.</p>
                </li>
                <li>
                    <strong>Enter Your Friend’s Public Address</strong>
                    <p>Have your friend read their 24-word public address to you. Type the words into the boxes below.</p>
                </li>
                <li>
                    <strong>Get Your Secret Code</strong>
                    <p>Click “Create Secret Code” to generate a 12-word secret code and a password you both can use.</p>
                </li>
            </ol>
        </section>
        <select id="securityLevel">
            <option value="high">High Security (256-bit, 24 words)</option>
            <option value="low">Low Security (192-bit, 18 words)</option>
            <option value="demo" class="demo-option">Demo DH (128-bit, 12 words) ⚠️</option>
        </select>
        <p id="demoWarning" style="color: red; display: none;">⚠️ Demo mode uses weak 128-bit keys! Only for education; real security requires larger keys. Eavesdroppers can potentially break this.</p>
        <button onclick="generateKeys()">Create My Codes <span class="loading" style="display:none;">⏳</span></button>
        <h3 id="publicKeyHeader">Your Public Address (24 words) <span class="tooltip">?<span class="tooltiptext">Share this with your friend over a call.</span></span>
            <button class="copy-btn" onclick="copyToClipboard('publicKeyMnemonic')">Copy</button></h3>
        <textarea id="publicKeyMnemonic" rows="4" readonly></textarea>
        <p class="tip">Read these 24 words to your friend over a phone or voice call where you can confirm their voice. Speak slowly to avoid mistakes. If a call isn’t possible, use a trusted messaging app, but be cautious.</p>
        <h3 id="privateKeyHeader">Your Private Key (24 words) <span class="tooltip">?<span class="tooltiptext">Keep this secret! Never share it.</span></span>
            <button class="copy-btn" onclick="copyToClipboard('privateKeyMnemonic')">Copy</button></h3>
        <textarea id="privateKeyMnemonic" rows="4" readonly></textarea>
        <p class="warning">Never share your private key with anyone!</p>
        <h3 id="partnerKeyHeader">Enter Your Friend’s Public Address (24 words) <span class="tooltip">?<span class="tooltiptext">Type the 24 words your friend reads to you.</span></span></h3>
        <p class="tip">Listen to your friend’s 24 words over a call, confirm their voice, and type them here. Start typing each word, and we’ll suggest matching words to make it easier.</p>
        <div id="partnerKeyInputs" class="word-grid"></div>
        <p id="wordCount">Words entered: 0/24</p>
        <button onclick="deriveSharedSecret()">Create Secret Code <span class="loading" style="display:none;">⏳</span></button>
        <h3 id="sharedSecretHeader">Your Secret Code (12 words) <span class="tooltip">?<span class="tooltiptext">Use this to lock messages or files with your friend.</span></span>
            <button class="copy-btn" onclick="copyToClipboard('sharedSecretMnemonic')">Copy</button></h3>
        <textarea id="sharedSecretMnemonic" rows="2" readonly></textarea>
        <h3>Suggested Password <span class="tooltip">?<span class="tooltiptext">Use this password for apps that need one. You and your friend have the same one.</span></span>
            <button class="copy-btn" onclick="copyToClipboard('suggestedSharedPassword')">Copy</button></h3>
        <textarea id="suggestedSharedPassword" rows="2" readonly></textarea>
        <p class="tip">
            <strong>Why Two Formats?</strong> The 12-word secret code is great for memorizing or sharing over a call, but some apps need a password. This password is another version of the same secret, made with letters, numbers, and symbols.
            <br><br><strong>How to Use It:</strong> Use the secret code or password to:
            - Lock a shared file (e.g., a zip file).
            - Set up a private chat or account.
            - Encrypt emails or documents.
            Always share it with your friend over a call where you recognize their voice!
        </p>
    </div>
    <script src="noble-curves.js"></script>
    <script src="mn_words.js"></script>
    <script src="mnemonic.js"></script>
    <script src="awesomplete-gh-pages/awesomplete.min.js"></script>
    <script src="main.js"></script>
</body>
</html>
